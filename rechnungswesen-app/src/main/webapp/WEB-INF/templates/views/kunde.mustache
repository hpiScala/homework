<div class="topbar">
    <div class="info-box">
        <h1>{{ name }}</h1>
        <span>{{ plz }} {{ ort }}</span>

    </div>
    <div class="nav">
        <a id="label1" class="label" onclick="showView(1)">KUNDENSTAMM</a>
        <a id="label2" class="label" onclick="showView(2)">AUSZIFFERN</a>
        <a id="label3" class="label" onclick="showView(3)">VERKÄUFE</a>
        <a id="label4" class="label" onclick="showView(4)">UMSATZ</a>
        <a id="label5" class="label" onclick="showView(5)">ERGEBNIS</a>
    </div>
</div>

<div id="view1" class="container">
    <div class="header">
        <h1>KUNDENSTAMM</h1>
    </div>
    <div>
        <ul style="float: left">
            <li><b>Kundennummer:</b> {{ kundenNummer }}</li>
            <li><b>Land:</b> {{ land }}</li>
            <li><b>Name:</b> {{ name }}</li>
            <li><b>Ort:</b> {{ ort }}</li>
            <li><b>PLZ:</b> {{ plz }}</li>
            <li><b>Region:</b> {{ region }}</li>
            <li><b>Straße:</b> {{ strasse }}</li>
            <li><b>Branche:</b> {{ branche }}</li>
            <li><b>Kundengruppe:</b> {{ kundengruppe }}</li>
        </ul>
        <style>
            #map_canvas {
                height: 450px;
                width: 100%;
                margin-bottom: -10px;
            }
        </style>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <div style="float: right"><iframe style="border: none; width: 150px; margin-top: 10px;" src="http://api.openweathermap.org/data/2.5/weather?q={{ ort }},{{ land }}&mode=html&appid=949b00b35164a548f4821bc295cab4e9"></iframe></div>
        <div id="map_canvas" ></div>
        <script>
            var geocoder;
            var map;
            var address = "{{ strasse }} {{ plz }} {{ ort }} {{ land }}";
            function initialize() {
                geocoder = new google.maps.Geocoder();
                var latlng = new google.maps.LatLng(-34.397, 150.644);
                var myOptions = {
                    zoom: 10,
                    center: latlng,
                    mapTypeControl: true,
                    mapTypeControlOptions: {
                        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
                    },
                    navigationControl: true,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                if (geocoder) {
                    geocoder.geocode({
                        'address': address
                    }, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
                                map.setCenter(results[0].geometry.location);
                                var infowindow = new google.maps.InfoWindow({
                                    content: '<b>' + address + '</b>',
                                    size: new google.maps.Size(150, 50)
                                });

                                var marker = new google.maps.Marker({
                                    position: results[0].geometry.location,
                                    map: map,
                                    title: address
                                });
                                google.maps.event.addListener(marker, 'click', function() {
                                    infowindow.open(map, marker);
                                });
                            } else {
                                alert("No results found");
                            }
                        } else {
                            alert("Geocode was not successful for the following reason: " + status);
                        }
                    });
                }
            }
            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </div>
</div>

<div id="view2" class="container">
        <div class="header">
            <h1>AUSZIFFERN</h1>
        </div>
        <div>
            <div>
                <input type="text" id="inputPropertyDatum" name="inputPropertyDatum" class="inputField" value="03.06.2014">
            </div>

            <script>
                jQuery(function($) {
                    $('#inputPropertyDatum').change(function() {
                        $.post("/offene-zahlungen/",
                        {
                            id: "{{ kundenNummer }}",
                            zeitpunkt: $('#inputPropertyDatum').val()
                        },
                        function(data, status){
                            $('#offene-zahlungen').html(data);
                        });
                    });

                    $('#inputPropertyDatum').datepicker({
                        format: "dd.mm.yyyy",
                        endDate: "0d",
                        todayBtn: "linked",
                        language: "de",
                        defaultDate: new Date(),
                        autoclose: true,
                        todayHighlight: true,
                        disableTouchKeyboard: true
                    });
                  });
            </script>
            <div id="offene-zahlungen">
            </div>
        </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
    $('#sales').DataTable({
            "language": {
                "url": "../../../js/de_DE.json"
            }
        });
} );
</script>

<div id="view3">
    <div class="container">
        <div class="header"><h1>VERKÄUFE</h1></div>
        <div>
            <table id="sales"  cellspacing="0" width="100%">
                <thead>
                <tr>
                    <th>BKreis</th>
                    <th>Jahr</th>
                    <th>Belegnummer</th>
                    <th>Betrag</th>
                    <th>Werk</th>
                    <th>Material</th>
                    <th>Buchungsdatum</th>
                </tr>
                </thead>

                <tbody>
                {{#transactions2}}
                    <tr>
                        <td>{{ buchungskreis }}</td>
                        <td>{{ geschaeftsjahr }}</td>
                        <td>{{ belegnummer }}</td>
                        <td data-order="{{intBetrag}}">{{ hausBetrag }} {{ hausWaehrung }}</td>
                        <td>{{ werk }}</td>
                        <td>{{ material }}</td>
                        <td>{{ buchungsdatum }}</td>
                    </tr>
                {{/transactions2}}
                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="view4">
    <div class="container">
        <div class="header"><h1>UMSATZ</h1></div>
        <div>
            <ul>
                <li><b>Umsatz 2014:</b> {{ umsatz2014 }}</li>
                <li><b>Umsatz 2015:</b> {{ umsatz2015 }}</li>
            </ul>
        </div>
    </div>
</div>

<div id="view5">
    <div class="container">
        <div class="header"><h1>ERGEBNIS</h1></div>
        <div>
            <ul>
                <li><b>Ergebnis 2013:</b> {{ ergebnis2014 }}</li>
                <li><b>Ergebnis 2014:</b> {{ ergebnis2015 }}</li>
            </ul>
        </div>
    </div>
</div>